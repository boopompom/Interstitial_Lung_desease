#Sylvain Kritter 2 mai 2016import numpy as npimport osfrom matplotlib import pyplot as plt#rep_cour = os.getcwd()#print (rep_cour)def fileext(namefile,curdir,cwd):    ofi = open(namefile, 'r')    t = ofi.read()    #print( t)    ofi.close()    debn=namefile.find('ROIs/')    endn=namefile.find('/CT')    debnn=namefile.find('UM')    endnn=namefile.find('.txt')    namep=namefile[debn+5:endn]+namefile[debnn+2:endnn]#    print(namefile)#    print(namep)    nslice = t.count('slice')    print('number of slice:',nslice)    numbercon = t.count('contour')    nset=0#    print('number of countour:',numbercon)    spapos=t.find('SpacingX')    coefposend=t.find('\n',spapos)    coefposdeb = t.find(' ',spapos)    coef=t[coefposdeb:coefposend]    coefi=float(coef)#    print('coef',coefi)    labpos=t.find('label')    labposend=t.find('\n',labpos)    labposdeb = t.find(' ',labpos)    label=t[labposdeb:labposend].strip()#    print('label',label)    locapos=t.find('loca')    locaposend=t.find('\n',locapos)    locaposdeb = t.find(' ',locapos)    loca=t[locaposdeb:locaposend].strip()#    print('localisation',loca)    slapos=t.find('slice')    slaposend=t.find('\n',slapos)    slaposdeb=t.find(' ',slapos)    slice=t[slaposdeb:slaposend].strip()#    print('slice:',slice)    nametabdir=curdir+'/patchfile/dir'+str(label)+str(loca)+'.txt'    mfdir=open(nametabdir,"w")        while (slapos!=-1):        nbpoint=0        nbppos=t.find('nb_point',slapos+1)        slapos=t.find('slice',slapos+1)        conend=False        while (not conend):            nset=nset+1            nbpoint=nbpoint+1#            print('nb_point set:',nbpoint, 'in:' , namefile)    #        print('nb_point pos :',nbppos)            nbposend=t.find('\n',nbppos)            tabposdeb=nbposend+1    #        print('debut tableau:',tabposdeb)            tabposend=t.find('nb_point',nbposend+1)            if tabposend==-1:                tabposend=len(t)-1            if (slapos >0  and tabposend >0):                 tabposend=min(tabposend,slapos)    #        print('fin tableau:',tabposend)            nametab=curdir+'/patchfile/slice_'+str(slice)+'_'+str(label)+\            '_'+str(loca)+'_'+str(nbpoint)+'.txt'#            print(nametab)            mfdir.write(nametab+'\n')            mf=open(nametab,"w")            mf.write(t[tabposdeb:tabposend-1])            mf.close()            nbppos=t.find('nb_point',nbppos+1)              if (slapos >1 and slapos<nbppos) or nbppos ==-1:                conend=True        if slapos!=-1:            slaposend=t.find('\n',slapos)            slaposdeb=t.find(' ',slapos)            slice=t[slaposdeb:slaposend].strip()#            print('slice:',slice)    print('total number of contour',nset,'in:' , namefile)    mfdir.close()    return(label,loca,coefi)